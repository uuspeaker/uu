<view>
  <view>
    <view>
      <view class="weui-navbar">
        <block wx:for="{{tabs}}" wx:key="*this">
          <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ? 'weui-bar__item_on' : ''}}" bindtap="tabClick">
            <view class="weui-navbar__title">{{item}}</view>
          </view>
        </block>
        <view class="weui-navbar__slider" style="left: {{sliderLeft}}px; transform: translateX({{sliderOffset}}px); -webkit-transform: translateX({{sliderOffset}}px);"></view>
      </view>
      <view class="">
        <!--tab1-->

        <view class="weui-tab__content" hidden="{{activeIndex != 0}}">
          <block wx:if="{{taskType == 1}}">
            <view class='pageContent'>
              <view class='tip'>一句话：</view>
              <view class='content'>我今年的目标是什么</view>
              <view class='tip'>一句话：</view>
              <view class='content'>我今天要做什么</view>
              <view class='tip'>一句话：</view>
              <view class='content'>为自己打CALL</view>
            </view>
          </block>
          <block wx:if="{{taskType == 2}}">
            <view class='pageContent'>
              <view class='tip'>一句话：</view>
              <view class='content'>我今天哪里做得好</view>
              <view class='tip'>一句话：</view>
              <view class='content'>我哪里可以做得更好</view>
              <view class='tip'>一句话：</view>
              <view class='content'>为自己打CALL</view>
            </view>
          </block>
          <block wx:if="{{taskType == 3}}">
            <view class='pageContent'>
              <view class='tip'>三十秒：</view>
              <view class='content'>赞美一个人</view>
            </view>
          </block>
          <block wx:if="{{taskType == 4}}">
            <view class='pageContent'>
              <view class='tip'>两分钟：</view>
              <view class='content'>做一篇即兴演讲</view>
            </view>
          </block>
          <block wx:if="{{taskType == 5}}">
            <view class='pageContent'>
              <view class='tip'>一分钟：</view>
              <view class='content'>给别人做反馈</view>
            </view>
          </block>
          <view class="weui-flex bottom">

            <view class="weui-flex__item note-btn " style="background: grey" data-audio_id='{{audios[0].audio_id}}'>
              <block wx:if="{{isCompleteTask == 1}}">
                <block wx:if="{{isPlay == 0}}">
                  <image class="audio-pic " style="left: 5px;position: relative" bindtap='play' src="../../../images/userIntroduction/play.png"></image>
                </block>
                <block wx:if="{{isPlay == 1}}">
                  <image class="audio-pic" bindtap='stop' src="../../../images/userIntroduction/stop.png"></image>
                </block>
              </block>
            </view>

            <view class="weui-flex__item note-btn" bindtouchstart="startRecord" bindtouchend="stopRecord">
              <image class="audio-pic" src="../../../images/audioDetail/voice.png"></image>
            </view>
          </view>
        </view>

        <view class="weui-tab__content" style='margin-top:50px;' hidden="{{activeIndex != 1}}">
          <view class="weui-cells weui-cells_after-title">
            <block wx:for="{{myTaskData}}" wx:key="item">
              <template is="scoreDetailTemplate" data="{{...item}}" />
            </block>
          </view>
        </view>

        <view class="weui-tab__content" style='margin-top:50px;' hidden="{{activeIndex != 2}}">
          <view class="weui-cells weui-cells_after-title">
            <block wx:for="{{allTaskData}}" wx:key="item">
              <template is="scoreDetailTemplate" data="{{...item}}" />
            </block>
          </view>
        </view>

      </view>
    </view>
  </view>
</view>

<template name="scoreDetailTemplate">
  <view class="weui-cell" bindtap='toAudioDetail' data-audio_id='{{audio_id}}'>
    <view class="user-avatar">
      <image class="user-pic" src="{{user_info.avatarUrl}}" />
    </view>
    <view class="weui-cell__bd">
      <view class="title">
        <view style='padding-left:10px'>
          <text>{{user_info.nickName}} </text>
          
          <text class='right'></text>
        </view>
      </view>
      <view>
        <view class="small-grey">
          <image class="like" src="../../../images/studyIndex/view.png" /> {{view_amount}}
          <image class="like" data-audio_id='{{audio_id}}' catchtap="likeIt" src="../../../images/studyIndex/like.png" /> {{like_amount}}
          <image class="like" src="../../../images/studyIndex/comment.png" /> {{comment_amount}} {{timeDurationStr}}
        </view>
      </view>

    </view>
    <block wx:if="{{isPlay == 0}}">
      <view class='right ' data-src='{{src}}' data-audio_id='{{audio_id}}' catchtap='playAudio'>
        <image class="audio" src="../../../images/userAudio/start.png" />
      </view>
    </block>
    <block wx:if="{{isPlay == 1}}">
      <view class='right link' data-src='{{src}}' data-audio_id='{{audio_id}}' catchtap='stopAudio'>
        <image class="audio" src="../../../images/userAudio/stop.png" />
      </view>
    </block>
  </view>
</template>